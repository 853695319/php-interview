#### 消息队列
指利用 高效可靠 的 消息传递机制 进行与平台无关的 数据交流，并基于 数据通信 来进行分布式系统的集成。

低耦合、可靠投递、广播、流量控制、最终一致性等功能

通过提供 消息传递 和 消息排队 模型，它可以在 分布式环境 下提供 应用解耦、弹性伸缩、冗余存储、流量削峰、异步通信、数据同步 等等功能，其作为 分布式系统架构 中的一个重要组件，有着举足轻重的地位。

#### 常见的消息队列
- RabbitMQ
    RabbitMQ实现了AQMP协议，AQMP协议定义了消息路由规则和方式。生产端通过路由规则发送消息到不同queue，消费端根据queue名称消费消息。
    RabbitMQ既支持内存队列也支持持久化队列，消费端为推模型，消费状态和订阅关系由服务端负责维护，消息消费完后立即删除，不保留历史消息。
    
- RocketMQ
- ActiveMQ
- Kafka
    Kafka只支持消息持久化，消费端为拉模型，消费状态和订阅关系由客户端端负责维护，消息消费完后不会立即删除，会保留历史消息。因此支持多订阅时，消息只会存储一份就可以了。但是可能产生重复消费的情况。
    
- ZeroMQ
- MetaMQ
- Redis
- MySQL

#### 消息队列的传输模式

- 点对点传输
    + 每个消息只用一个消费者；
    + 发送者和接受者没有时间依赖；
    + 接受者确认消息接受和处理成功。
- 发布/订阅模型（Pub/Sub）
    + 每个消息可以有多个订阅者；
    + 客户端只有订阅后才能接收到消息；
    + 持久订阅和非持久订阅。

#### 消息队列应用场景
- 异步处理

非核心 流程 异步化，减少系统 响应时间，提高 吞吐量。例如：短信通知、终端状态推送、App 推送、用户注册 等

- 系统解耦

不强依赖 于非本系统的核心流程，对于 非核心流程，可以放到消息队列中让 消息消费者 去按需消费，而 不影响核心主流程。

- 最终一致性

最终一致性 不是 消息队列 的必备特性，但确实可以依靠 消息队列 来做 最终一致性 的事情。

- 广播

生产者/消费者 模式，只需要关心消息是否 送达队列，至于谁希望订阅和需要消费，是 下游 的事情，无疑极大地减少了开发和联调的工作量。

- 流量削峰和流控

当 上下游系统 处理能力存在差距的时候，利用 消息队列 做一个通用的 “漏斗”，进行 限流控制。在下游有能力处理的时候，再进行分发。

- 日志处理

将消息队列用在 日志处理 中，比如 Kafka 的应用，解决 海量日志 传输和缓冲的问题。

- 消息通讯

消息队列一般都内置了 高效的通信机制，因此也可以用于单纯的 消息通讯，比如实现 点对点消息队列 或者 聊天室 等。